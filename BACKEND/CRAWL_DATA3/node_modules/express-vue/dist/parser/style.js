'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _cleanCss = require('clean-css');

var _cleanCss2 = _interopRequireDefault(_cleanCss);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var styleRegex = /(<style.*?>)([\s\S]*?)(<\/style>)/gm;


function styleParser(template, regex) {
    if (!regex) {
        regex = styleRegex;
    }
    var styleArray = template.match(regex) || [];
    var styleString = styleArray[0];
    var finalStyleString = '';
    if (styleString) {
        finalStyleString = styleString.replace(regex, '$2');

        var templateLang = styleString.replace(regex, '$1');
        if (templateLang.includes('lang="scss"') || templateLang.includes('lang="less"')) {
            console.error('Sorry please only use plain CSS in your files for now');
        }
    }
    var options = {};
    var output = new _cleanCss2.default(options).minify(finalStyleString);
    return output.styles;
}

exports.default = styleParser;
module.exports = exports['default'];